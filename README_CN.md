# RSI Alert Final Edition
## (2025.8 更新 - 支持ADX均值降噪过滤)

功能强大的MetaTrader 5专家顾问(EA)，支持多周期RSI反转和背离监控，具备先进的信号融合降噪机制、ADX趋势强度过滤和双语界面。

## 🌟 核心功能

- **多周期RSI监控** - 同时监控最多4个不同时间周期（M30/H1/H4/D1等）
- **ADX均值过滤** - 仅在震荡/弱趋势区报警，过滤强趋势虚假信号  
- **RSI反转检测** - 自动检测超卖/超买穿越信号
- **背离分析** - 高级多空背离检测算法
- **信号融合机制** - 同一K线多周期只保留最强信号，避免重复报警
- **三重降噪过滤** - 集成分型模式、极值条件、信号间隔和ADX趋势过滤
- **双语界面** - 中英文界面自由切换
- **一键操作** - 一键清除信号标记和一键清仓功能
- **可定制警报** - 可选弹窗和声音提醒
- **简洁UI设计** - 横排按钮布局，实时状态显示

## 📊 信号类型

### RSI反转信号
- **看涨穿越**: RSI上穿超卖线（默认: 30）
- **看跌穿越**: RSI下穿超买线（默认: 70）

### 背离信号
- **底背离**: 价格创新低而RSI创新高
- **顶背离**: 价格创新高而RSI创新低

## ⚙️ 参数设置

| 参数 | 描述 | 默认值 | 推荐值 |
|------|------|--------|--------|
| `RSI_Period` | RSI计算周期 | 14 | 14 |
| `Oversold_Level` | 超卖阈值 | 30.0 | 30 |
| `Overbought_Level` | 超买阈值 | 70.0 | 70 |
| `Extreme_Oversold` | 背离极端超卖线 | 20.0 | 20 |
| `Extreme_Overbought` | 背离极端超买线 | 80.0 | 80 |
| `Lookback_Bars` | 回看K线数量 | 30 | 30 |
| `MinDivergenceGap` | 背离点最小间隔 | 5 | 5 |
| `MinSignalInterval` | 同向信号最小间隔 | 8 | 8 |
| `ADX_Period` | **新增**: ADX计算周期 | 14 | 14 |
| `ADX_Threshold` | **新增**: ADX均值过滤上限 | 25.0 | 15-30 |
| `ADX_Avg_Window` | **新增**: ADX均值窗口 | 5 | 3-8 |
| `TF1-TF4` | 监控时间周期(最多4个) | M30/H1/H4/D1 | 自定义 |
| `Sound_Alerts` | 启用弹窗/声音警报 | true | true/false |
| `Sound_File` | 声音文件名 | alert.wav | alert.wav |
| `Use_Chinese` | 使用中文界面 | false | true/false |

## 🎯 安装步骤

1. 将 `RSI Alert.mq5` 复制到 MetaTrader 5 的 `MQL5/Experts` 文件夹
2. 确保声音文件 (`alert.wav`) 位于 `MQL5/Sounds` 文件夹中（如果使用声音提醒）
3. 重启MetaTrader 5或刷新导航器
4. 将EA拖拽到目标图表上

## 🖱️ 界面控制

### 横排按钮栏
- **清除**: 删除图表上所有RSI和背离信号标记
- **平仓**: 关闭当前品种所有持仓
- **状态栏**: 显示当前监控的时间周期

### 视觉信号
- **绿色↑箭头**: 底背离或超卖穿越
- **橙色↓箭头**: 顶背离或超买穿越
- **文字标签**: 显示信号类型、周期和RSI数值

## 🔧 高级功能

### ADX均值趋势过滤（核心新功能）
**智能趋势过滤系统**: EA现在集成ADX（平均趋向指数）过滤机制：
- **趋势强度检测**: 实时计算ADX最近N根K线的均值
- **智能过滤**: 仅在ADX均值低于设定阈值时允许信号发出
- **避免逆势操作**: 有效过滤强趋势中的虚假反转信号  
- **聚焦震荡区**: 信号集中在震荡市或趋势衰减区，大幅提升准确率

### 信号融合机制
**全新增强功能**: EA实现智能信号融合以消除重复警报:
- **统一收集**: 所有时间周期的信号收集到集中缓存
- **优先级筛选**: 同一K线同类信号只保留最高周期
- **质量提升**: 高周期信号通常更可靠
- **去重处理**: 完全避免同一市场状态的多重同时警报

### 三重降噪过滤系统
EA通过以下方式实现复合降噪处理:
1. **分型模式验证**: 信号仅在确认的分型顶底触发
2. **极值要求**: 背离需要极端RSI水平
3. **时间间隔过滤**: 最小间隔设置防止信号聚集
4. **ADX趋势过滤**: 过滤强趋势中的逆势信号
5. **信号融合**: 多周期去重实现更清洁的信号输出

### 多语言支持
使用 `Use_Chinese` 参数切换中英文界面:
- `true` = 中文界面
- `false` = 英文界面

### 警报系统
可配置的警报系统支持:
- 视觉弹窗警报
- 声音提醒
- 日志文件输出（始终启用）
- 完全静默模式用于回测

## 📈 使用建议

### 最佳设置
- **高波动市场**: 增大 `MinSignalInterval` 减少噪音，调整 `ADX_Threshold` 到20-25
- **震荡市场**: 降低 `ADX_Threshold` 到15-20，提高信号敏感度
- **趋势市场**: 提高 `ADX_Threshold` 到25-30，专注过滤逆势信号
- **不同品种优化**: 
  - 黄金/外汇: ADX_Threshold = 20-25
  - 指数/股票: ADX_Threshold = 25-30

### 交易策略
- 将信号用作**交易辅助**，而非自动进出场点
- 结合基本面分析和市场结构
- 实盘前在模拟环境充分测试
- 实施适当的风险管理和仓位控制
- **ADX过滤显著提升信号质量，但会减少信号数量**

### 周期选择
推荐的周期组合:
- **日内交易**: M30, H1, H4
- **波段交易**: H1, H4, D1
- **长线分析**: H4, D1, W1

## 🛠️ 技术规格

- **平台**: MetaTrader 5
- **语言**: MQL5
- **依赖**: Trade.mqh库（MT5内置）
- **图表要求**: 任何有足够历史数据的图表

## 📝 更新日志

### 最新版本功能
- **新增**: ADX均值趋势过滤 - 仅在震荡/弱趋势区发出信号，极大降低误报
- **新增**: 三重降噪过滤系统 - 传统降噪 + 信号融合 + ADX过滤
- **调整**: 监控周期调整为最多4个（TF1-TF4），优化性能
- 多周期RSI监控和高级背离检测
- 双语界面支持
- 一键信号清理和仓位管理
- 可定制的视觉和音频警报
- 简洁、非干扰性UI设计

### ADX过滤增强
- 智能趋势强度检测和过滤
- 可自定义ADX阈值和均值窗口
- 显著提升信号质量，降低虚假报警
- 特别适合震荡市和趋势反转捕捉

## 🔍 故障排除

### 常见问题

**按钮不显示?**
- 确保EA在 `MQL5/Experts` 文件夹，而非指标文件夹
- 检查屏幕分辨率和缩放设置
- 重启MetaTrader 5

**无声音警报?**
- 验证 `Sound_Alerts` 参数设为 `true`
- 检查声音文件是否存在于 `MQL5/Sounds` 文件夹
- 测试MT5声音设置

**信号太多?**
- 增大 `MinSignalInterval` 值
- 提高 `Extreme_Oversold`/`Extreme_Overbought` 阈值
- 减少监控的时间周期数量
- 新的信号融合机制会自动减少重复警报

**信号太少?**
- 这可能是ADX过滤生效的正常现象
- 适当提高 `ADX_Threshold`（如从20升至25）
- 增大 `ADX_Avg_Window` 使过滤更加平滑
- 调整 `Extreme_Oversold`/`Extreme_Overbought` 阈值

**ADX过滤效果如何验证?**
- 检查MT5日志中的ADX过滤信息
- 对比有无ADX过滤的信号数量差异
- 在Strategy Tester中测试不同ADX参数

**某些周期的信号丢失?**
- 这是启用信号融合后的正常行为
- 高周期优先于低周期
- 检查日志查看融合前的所有检测信号

## 📞 技术支持

如有技术问题或疑问:
- 查阅包含的技术文档
- 检查MT5专家顾问日志中的错误信息
- 确保所有参数在有效范围内

## 📄 许可证

本项目按原样提供，用于教育和交易目的。使用风险自负。

---

*最后更新: 2025年8月*
